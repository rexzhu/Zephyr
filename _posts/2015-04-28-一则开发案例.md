---
published: true
title: 一则开发案例
layout: post
author: Rex
category: story
tags:
- management
- story
---
昨晚, 莫名想到了很久以前的一个开发的故事…

期初是几个资深工程师设计了一个性能管理的产品，用来管理各种设备的性能。 从允许动态加载配置文件到任务调度、监控、执行、异常、统计报表输出事无巨细都考虑到了。

当这个平台产品出来后对接到业务部门，发现很多的设计无法覆盖到业务部门的特异性。
举例而言...
-框架定义了任务调度是以小时为单位采集数据，但是有些业务设备是无法提供小时数据的，那对于这类业务设备，这个调度接口就是废了；
-框架要求采集任务不能很耗时，但是担心业务部门的实现不好会影响框架整体运行，于是定义了一个复杂的中断-异常判断机制，令后期问题复现和调试极其麻烦；
-框架认为性能数据应该符合一种规律，于是定义了一个检测数据合法性的机制，但业务部门本身对于该机制没有需求，于是所有的改检测接口返回的都是OK，这个机制形同虚设。
......

于是这个框架受到了来自各业务部门的反对和抵触，工程师们后来改变了思路，
-不做框架做服务，提供最小数据的模型单元的存储；
-开放任务调度权力，改同步处理任务为异步处理，将执行权交给业务部门；
-取消对业务部门数据合法性的检测机制，改而从用户体验和交互上优化数据使用
......

-业务部门用起了存储服务，于是平台有了业务部门真正关心的数据；
-业务部门用起了调度服务，于是平台有了业务部门真实业务执行的轨迹；
-业务部门用起了改良的用户体验设计，于是平台有了增值开放价值的入口；
......

`一个平台做了框架，意味着消耗CPU和内存资源就多，留给具体业务实现的资源就少，它的可行建立在“具体业务简单，易度量，有公认的统一指标和数据模型”，如果在一个近似零和的环境下，那真实的业务实现可能都无法得到机会执行。相信同样道理适用在任何资源受限的场景，这是一个期望和配置的关系，即“没有最好的XX，只是最合适的XX”。